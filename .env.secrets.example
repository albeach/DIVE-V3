# =============================================================================
# DIVE V3 - SECRETS CONFIGURATION
# =============================================================================
# This is the SINGLE SOURCE OF TRUTH for all secrets.
# 
# SETUP:
#   1. Copy this file to .env.secrets
#   2. Generate strong passwords for each value
#   3. NEVER commit .env.secrets to version control
#
# HOW IT WORKS:
#   - docker-compose.yml reads from this file via env_file directive
#   - Terraform reads via TF_VAR_* environment variables
#   - Application .env files reference these variables
#
# PASSWORD GENERATION (use one of these):
#   openssl rand -base64 32
#   uuidgen | tr -d '-'
#   pwgen -s 32 1
# =============================================================================

# -----------------------------------------------------------------------------
# KEYCLOAK ADMIN CREDENTIALS
# -----------------------------------------------------------------------------
# Used by: Terraform (TF_VAR_keycloak_admin_password), docker-compose
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_GENERATE_32_CHAR_PASSWORD

# -----------------------------------------------------------------------------
# DATABASE CREDENTIALS
# -----------------------------------------------------------------------------
# PostgreSQL (Keycloak database)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_32_CHAR_PASSWORD

# MongoDB (Resource metadata)
MONGO_INITDB_ROOT_USERNAME=admin
MONGO_INITDB_ROOT_PASSWORD=CHANGE_ME_GENERATE_32_CHAR_PASSWORD

# Redis (Token blacklist - no auth by default, but can add)
REDIS_PASSWORD=CHANGE_ME_GENERATE_32_CHAR_PASSWORD

# -----------------------------------------------------------------------------
# APPLICATION SECRETS
# -----------------------------------------------------------------------------
# NextAuth.js secret (for JWT signing)
AUTH_SECRET=CHANGE_ME_GENERATE_32_CHAR_PASSWORD

# Keycloak Client Secret (generated by Keycloak, retrieve via admin console)
KEYCLOAK_CLIENT_SECRET=CHANGE_ME_GET_FROM_KEYCLOAK

# -----------------------------------------------------------------------------
# CLOUDFLARE TUNNEL CREDENTIALS
# -----------------------------------------------------------------------------
# Tunnel tokens are stored separately per instance in:
#   - cloudflared/tunnel-credentials.json
#   - instances/{instance}/cloudflared/credentials.json
# These are also gitignored and should be generated via:
#   cloudflared tunnel create <tunnel-name>

# -----------------------------------------------------------------------------
# TERRAFORM VARIABLES (TF_VAR_ prefix auto-maps to Terraform)
# -----------------------------------------------------------------------------
# When you run: source .env.secrets && terraform apply
# Terraform automatically picks up TF_VAR_* as variable values
TF_VAR_keycloak_admin_password=${KEYCLOAK_ADMIN_PASSWORD}

# -----------------------------------------------------------------------------
# INSTANCE-SPECIFIC SECRETS (for multi-instance deployments)
# -----------------------------------------------------------------------------
# USA Instance
USA_KEYCLOAK_CLIENT_SECRET=CHANGE_ME_GET_FROM_KEYCLOAK_USA
USA_POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# FRA Instance
FRA_KEYCLOAK_CLIENT_SECRET=CHANGE_ME_GET_FROM_KEYCLOAK_FRA
FRA_POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# DEU Instance
DEU_KEYCLOAK_CLIENT_SECRET=CHANGE_ME_GET_FROM_KEYCLOAK_DEU
DEU_POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

