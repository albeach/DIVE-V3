# Test RSA Keys

**Purpose:** RSA key pair for E2E test JWT signing/verification

## Files

- `test-private-key.pem` - Private key for signing test JWTs (RS256)
- `test-public-key.pem` - Public key for verifying test JWTs
- `README.md` - This file

## Usage

### Signing Test JWTs

```typescript
import fs from 'fs';
import jwt from 'jsonwebtoken';

const privateKey = fs.readFileSync(
  path.join(__dirname, 'keys/test-private-key.pem'),
  'utf8'
);

const token = jwt.sign({ sub: 'test' }, privateKey, { algorithm: 'RS256' });
```

### Verifying Test JWTs

```typescript
const publicKey = fs.readFileSync(
  path.join(__dirname, 'keys/test-public-key.pem'),
  'utf8'
);

const decoded = jwt.verify(token, publicKey, { algorithms: ['RS256'] });
```

### Mocking JWKS Endpoint

```typescript
import { importSPKI, exportJWK } from 'jose';

const publicKey = await importSPKI(publicKeyPem, 'RS256');
const jwk = await exportJWK(publicKey);

nock(keycloakUrl)
  .get('/realms/test/protocol/openid-connect/certs')
  .reply(200, { keys: [{ ...jwk, kid: 'test-key-1' }] });
```

## Security Notes

⚠️ **TESTING ONLY** - These keys are for test environments only:

- ✅ Safe to commit to repository
- ✅ Used only in test environment
- ✅ No real user data or production use
- ❌ DO NOT use in production
- ❌ DO NOT use for real authentication

## Key Properties

- **Algorithm:** RSA
- **Key Size:** 2048 bits
- **Format:** PEM
- **Type:** PKCS#8 (private), SPKI (public)

## Generated By

Script: `backend/scripts/generate-test-rsa-keys.sh`  
Date: Auto-generated during test setup  
Purpose: E2E test JWT authentication (RS256)

## References

- Investigation: `E2E-TEST-INVESTIGATION.md`
- Implementation: Option D (Mock JWKS Endpoint)
- Tests: `backend/src/__tests__/e2e/*.test.ts`
