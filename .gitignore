# ============================================
# DIVE V3 Git Ignore (AGGRESSIVE + CLEANED)
# ============================================

##########
# Root-level personal notes / scratch
##########
/*.md
!README.md
/*.sh
/*.txt
!package*.json

/notes/
/docs/notes/
notes/
bin/
backups/
.archive/
.archived/
.archived/**/*
resources/
# (your prior rule was /resources/ root-only; keeping it root-only)
#/resources/

##########
# Handoff documents (session-specific, not source code)
##########
**/HANDOFF*.md
**/handoff*.md
**/SESSION-HANDOFF*.md
**/*CONTINUATION_HANDOFF*.md
**/*COMPLETION_HANDOFF*.md
**/*IMPLEMENTATION-HANDOFF*.md

##########
# Archived files (should stay local only)
##########
**/*.archived
**/archived/
keycloak/realms/archived/

##########
# Diagnostic screenshots (debug artifacts)
##########
frontend/*.png
frontend/*.jpg

##########
# One-off debug/fix test scripts
##########
scripts/test-*-fix.sh
scripts/audit-*.sh
tests/**/test-*-fixes.sh
tests/**/test-*-fix.sh

##########
# Large media files (use LFS or external storage)
##########
**/*.mp4
**/*.mp3
**/*.m4a
**/*.avi
**/*.mov

##########
# Docs: keep README(s), ignore local-only notes
##########
docs/*.md
docs/**/*.md
docs/*.txt
!docs/README.md
!docs/**/README.md
docs/archive/

##########
# Environment files / secrets
##########
.env
.env.*
.env*.local
.env.local
.env.production
.env.development
!.env.example

# Vault sensitive files
.vault-token
.vault-init.txt

.env.secrets
.env.secrets.*
!.env.secrets.example

.env.cloudflare
.env.gcp
gcp/

secrets/
.secrets/
.terraform-keys/

##########
# Logs & runtime artifacts (KILL THEM WITH FIRE)
##########
logs/
*.log
**/*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# keep these two app routes tracked (your exceptions)
!frontend/src/app/api/admin/logs/
!frontend/src/app/admin/logs/

# common runtime dump/artifact dirs
**/output/
**/results/
**/reports/
!frontend/src/app/api/admin/compliance/reports/
**/cache/
**/uploads/
**/tmp/
**/temp/
tmp/
temp/
.cache/
temp-ref/
.dive-state/
*.state

# If you produce extracted docs/proofs/etc in backend/output, this catches them:
backend/output/
backend/uploads/
tests/results/
tests/reports/

##########
# Dependencies / package managers
##########
**/node_modules/
.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

##########
# Test outputs
##########
coverage/
**/coverage/
test-results/
playwright-report/
.nyc_output/

##########
# Next.js / frontend build artifacts + caches
##########
.next/
**/.next/
out/
build/
dist/

# TypeScript build info
*.tsbuildinfo
**/*.tsbuildinfo

# SWC cache (you have frontend/.swc in tree)
.swc/
**/.swc/

# Next/React build chunk junk (if it leaks anywhere)
**/static/chunks/
**/static/chunks/**

# Vercel
.vercel/

##########
# IDE / local tooling
##########
.vscode/*
!.vscode/settings.json
.idea/
*.swp
*.swo
*.tmp

# Cursor / Claude local state
.cursor/
.claude

# Docker local state
.docker/

##########
# OS noise
##########
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

##########
# Certificates / keys (CRITICAL)
# Default: ignore all cert/key material everywhere.
# Only allow fixtures/templates explicitly if you want them tracked.
##########
**/*.key
**/*.pem
**/*.crt
**/*.cer
**/*.p12
**/*.pfx
**/*.jks
**/*.p7b
**/*.p7c
**/*.csr
**/*.srl
mongo-keyfile
**/mongo-keyfile

# Allow test fixture certs (needed for unit tests)
!backend/src/__tests__/__fixtures__/**/*.crt

# OPAL master token (NEVER commit)
certs/opal/master_token.txt

# Explicit instance cert locations (belt + suspenders)
instances/*/certs/
instances/*/certs/**

# Temp instance directories / flags / generated compose
instances/tmp*/
instances/rou/
instances/*/.initialized
instances/*/.localized
instances/*/.hub-registered
instances/*/.secret-hash
instances/*/.env
instances/*/.env.*
instances/*/docker-compose.yml
instances/*/verification-report.json
instances/*/config.json

# Pilot spoke selection cache
.pilot-spoke

# Cloudflared credentials
cloudflared/tunnel-credentials.json

##########
# Backups / editor swap / timestamped junk
##########
*.bak
*.bak*
*.backup
*.old
*.orig
*.rej
*.swx

# "key.pem.bak.XXXXXXX" / "something.bak.20260125" etc
**/*.bak.[0-9]*
**/*.bak.20[0-9][0-9]*
**/*.[0-9][0-9][0-9][0-9][0-9][0-9]  # e.g., file.123456

# Terraform / tool-generated timestamped backups
*.backup-*
**/*.backup-*
*.bak-*
**/*.bak-*

##########
# Terraform (generated state/plan/working dirs)
##########
**/.terraform/
*.tfstate
*.tfstate.*
*.tfplan
*.plan
*.auto.tfvars
terraform/crash.log
terraform/crash.*.log
terraform/*.tfvars
terraform/*.tfvars.json
terraform/instances/*.tfvars
terraform/instances/*.tfplan
terraform/tfplan*
**/tfplan
.terraform.lock.hcl

# Exceptions
!terraform/terraform.tfvars.example
!terraform/hub/hub.tfvars

##########
# Java / Maven (Keycloak extensions)
##########
**/target/
**/target/classes/
keycloak/extensions/**/target/

##########
# OPA bundles / generated policy artifacts
##########
bundle.tar.gz
policies/.bundle/
backend/policies/uploads/

##########
# Generated documentation
##########
api-docs/generated/

##########
# Python (if any)
##########
__pycache__/
*.py[cod]
*$py.class
.Python
venv/
env/

##########
# Keep important empty dirs
##########
!backend/logs/.gitkeep
!kas/logs/.gitkeep
!frontend/public/.gitkeep

##########
# OPAL SSOT data blocks (keep your explicit rules)
##########
policies/data.json
policies/policy_data.json
policies/tenant/*/data.json
backend/data/opal/trusted_issuers.json
backend/data/opal/federation_matrix.json
backend/data/opal/tenant_configs.json
opal-data-source/trusted_issuers.json
opal-data-source/federation_matrix.json

!policies/data/minimal-base-data.json
!policies/**/*.rego
