# =============================================================================
# DIVE V3 - USA Instance Cloudflare Tunnel Configuration
# =============================================================================
# Generated by generate-instance.sh - Do not edit manually
# Regenerate with: ./scripts/generate-instance.sh USA
# =============================================================================

tunnel: f8e6c558-847b-4952-b8b2-27f98a85e36c
credentials-file: /etc/cloudflared/credentials.json

# Force HTTP/2 to avoid QUIC timeout issues on restricted networks
protocol: http2

ingress:
  # Frontend (Next.js serves HTTP internally)
  - hostname: usa-app.dive25.com
    service: http://frontend-usa:3000

  # Backend API
  - hostname: usa-api.dive25.com
    service: https://backend-usa:4000
    originRequest:
      noTLSVerify: true

  # Keycloak IdP
  - hostname: usa-idp.dive25.com
    service: https://keycloak-usa:8443
    originRequest:
      noTLSVerify: true

  # KAS
  - hostname: usa-kas.dive25.com
    service: https://kas-usa:8080
    originRequest:
      noTLSVerify: true

  # Catch-all
  - service: http_status:404
