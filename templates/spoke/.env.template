# =============================================================================
# DIVE V3 Spoke Environment Configuration
# =============================================================================
# Template file - copy to instances/<code>/.env and fill in values
# =============================================================================

# -----------------------------------------------------------------------------
# Database Passwords
# Generate secure random passwords for each service
# Example: openssl rand -base64 16 | tr -d '/+='
# -----------------------------------------------------------------------------
POSTGRES_PASSWORD=
MONGO_PASSWORD=

# -----------------------------------------------------------------------------
# Keycloak Admin
# The admin password for the Keycloak instance
# -----------------------------------------------------------------------------
KEYCLOAK_ADMIN_PASSWORD=

# -----------------------------------------------------------------------------
# Authentication Secrets
# Used for NextAuth session encryption and Keycloak client authentication
# AUTH_SECRET: openssl rand -base64 32
# KEYCLOAK_CLIENT_SECRET: Must match the client secret configured in Keycloak
# -----------------------------------------------------------------------------
AUTH_SECRET=
KEYCLOAK_CLIENT_SECRET=

# -----------------------------------------------------------------------------
# Hub Connection
# The URL of the DIVE V3 Hub for federation
# Default hub is usa-api.dive25.com
# -----------------------------------------------------------------------------
HUB_URL=https://usa-api.dive25.com
HUB_OPAL_URL=https://usa-api.dive25.com:7002

# -----------------------------------------------------------------------------
# Spoke Token (REQUIRED for Federation)
# Received after Hub admin approves your registration
# Run: ./dive --instance <code> spoke register
# Then wait for approval and add the token here
# -----------------------------------------------------------------------------
SPOKE_OPAL_TOKEN=

# -----------------------------------------------------------------------------
# Instance Configuration
# Auto-generated during spoke init
# -----------------------------------------------------------------------------
INSTANCE_CODE=
SPOKE_ID=

# -----------------------------------------------------------------------------
# Cloudflare Tunnel (Optional)
# If using dive25.com subdomains, add your tunnel token here
# Create tunnel at: https://one.dash.cloudflare.com
# -----------------------------------------------------------------------------
TUNNEL_TOKEN=

# -----------------------------------------------------------------------------
# Optional Overrides
# Uncomment and set if you need to override defaults
# For spokes, use unique ports to avoid conflict with Hub
# Default offsets: +10000 (e.g., Hub 8443 â†’ Spoke 18443)
# -----------------------------------------------------------------------------
# KEYCLOAK_HOST_PORT=18443
# KEYCLOAK_HTTP_PORT=18080
# BACKEND_HOST_PORT=14000
# FRONTEND_HOST_PORT=13000
# OPA_HOST_PORT=18181
# KAS_HOST_PORT=18085
# OPAL_HOST_PORT=17000

# -----------------------------------------------------------------------------
# NIST 800-63B Compliant Passwords (16+ chars)
# Used for test users in realm import
# -----------------------------------------------------------------------------
ADMIN_PASSWORD=DiveAdminSecure2025!
TEST_USER_PASSWORD=DiveTestSecure2025!
